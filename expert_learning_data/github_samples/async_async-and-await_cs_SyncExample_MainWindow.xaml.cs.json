{
  "repo": "dotnet/samples",
  "file_path": "async/async-and-await/cs/SyncExample/MainWindow.xaml.cs",
  "file_name": "MainWindow.xaml.cs",
  "content": "ï»¿using System.Collections.Generic;\nusing System.Diagnostics;\nusing System.IO;\nusing System.Linq;\nusing System.Net;\nusing System.Windows;\n\nnamespace SyncExample\n{\n    public partial class MainWindow : Window\n    {\n        private readonly IEnumerable<string> _urlList = new string[]\n        {\n            \"https://docs.microsoft.com\",\n            \"https://docs.microsoft.com/azure\",\n            \"https://docs.microsoft.com/powershell\",\n            \"https://docs.microsoft.com/dotnet\",\n            \"https://docs.microsoft.com/aspnet/core\",\n            \"https://docs.microsoft.com/windows\"\n        };\n\n        private void OnStartButtonClick(object sender, RoutedEventArgs e)\n        {\n            _resultsTextBox.Clear();\n\n            SumPageSizes();\n\n            _resultsTextBox.Text += $\"\\nControl returned to {nameof(OnStartButtonClick)}.\";\n        }\n\n        private void SumPageSizes()\n        {\n            var stopwatch = Stopwatch.StartNew();\n\n            int total = _urlList.Select(url => ProcessUrl(url)).Sum();\n\n            stopwatch.Stop();\n            _resultsTextBox.Text += $\"\\nTotal bytes returned:  {total:#,#}\";\n            _resultsTextBox.Text += $\"\\nElapsed time:          {stopwatch.Elapsed}\\n\";\n        }\n\n        private int ProcessUrl(string url)\n        {\n            using var memoryStream = new MemoryStream();\n            var webReq = (HttpWebRequest)WebRequest.Create(url);\n\n            using WebResponse response = webReq.GetResponse();\n            using Stream responseStream = response.GetResponseStream();\n            responseStream.CopyTo(memoryStream);\n\n            byte[] content = memoryStream.ToArray();\n            DisplayResults(url, content);\n\n            return content.Length;\n        }\n\n        private void DisplayResults(string url, byte[] content) =>\n            _resultsTextBox.Text += $\"{url,-60} {content.Length,10:#,#}\\n\";\n    }\n}\n",
  "analysis": {
    "lines": 61,
    "classes": 1,
    "methods": 4,
    "interfaces": 0,
    "usings": [
      "System.Collections.Generic",
      "System.Diagnostics",
      "System.Linq",
      "System.Net",
      "System.Windows",
      "System.IO"
    ],
    "namespaces": [
      "SyncExample"
    ],
    "has_async": false,
    "has_linq": true,
    "has_generics": true,
    "complexity_estimate": 0,
    "quality_score": 0.9
  },
  "size": 1883,
  "url": "https://github.com/dotnet/samples/blob/main/async/async-and-await/cs/SyncExample/MainWindow.xaml.cs",
  "collected_at": "2025-06-27T01:19:19.451599"
}