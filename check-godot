#!/usr/bin/env python3
"""
AI Godot ìƒíƒœ í™•ì¸
"""
import os
import sys
import json
from pathlib import Path

# ìƒ‰ìƒ ì½”ë“œ
GREEN = '\033[92m'
YELLOW = '\033[93m'
RED = '\033[91m'
BLUE = '\033[94m'
CYAN = '\033[96m'
RESET = '\033[0m'

def main():
    print(f"\n{BLUE}ğŸ” AI Godot ìƒíƒœ í™•ì¸{RESET}")
    print("=" * 50)
    
    # í”„ë¡œì íŠ¸ ë£¨íŠ¸
    script_path = Path(__file__).resolve()
    project_root = script_path.parent
    
    # 1. ì„¤ì • íŒŒì¼ í™•ì¸
    config_file = project_root / ".godot_config.json"
    if config_file.exists():
        print(f"\n{GREEN}âœ… ì„¤ì • íŒŒì¼ ë°œê²¬{RESET}")
        try:
            with open(config_file) as f:
                config = json.load(f)
            
            godot_path = config.get("godot_path", "")
            if Path(godot_path).exists():
                print(f"   ê²½ë¡œ: {godot_path}")
                print(f"   ë²„ì „: {config.get('version', 'unknown')}")
                print(f"   AI ìˆ˜ì •: {config.get('ai_modified', False)}")
                
                if config.get('ai_modified'):
                    print(f"\n{GREEN}âœ… AI ìˆ˜ì •ëœ Godot ì‚¬ìš© ê°€ëŠ¥!{RESET}")
                    print(f"\nê¸°ëŠ¥:")
                    for feature in config.get('features', []):
                        print(f"  - {feature}")
                else:
                    print(f"\n{YELLOW}âš ï¸ ì¼ë°˜ Godot (AI ê¸°ëŠ¥ ì œí•œì ){RESET}")
            else:
                print(f"{RED}âŒ ì„¤ì •ëœ ê²½ë¡œì— Godotì´ ì—†ìŠµë‹ˆë‹¤{RESET}")
        except:
            print(f"{RED}âŒ ì„¤ì • íŒŒì¼ ì½ê¸° ì‹¤íŒ¨{RESET}")
    else:
        print(f"{YELLOW}âš ï¸ ì„¤ì • íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤{RESET}")
    
    # 2. ë¹Œë“œëœ Godot í™•ì¸
    print(f"\n{CYAN}ë¹Œë“œëœ Godot ê²€ìƒ‰:{RESET}")
    
    godot_paths = [
        project_root / "godot_ai_build" / "output" / "godot.ai.editor.linux.x86_64",
        project_root / "godot_ai_build" / "Godot_v4.3-stable_win64.exe",
        project_root / "godot_engine" / "Godot_v4.3-stable_linux.x86_64",
    ]
    
    found = False
    for path in godot_paths:
        if path.exists():
            print(f"  âœ… {path.name}")
            found = True
    
    if not found:
        print(f"  {YELLOW}ì—†ìŒ{RESET}")
    
    # 3. ë¹Œë“œ ìƒíƒœ
    build_dir = project_root / "godot_ai_build"
    if build_dir.exists():
        print(f"\n{CYAN}ë¹Œë“œ ë””ë ‰í† ë¦¬:{RESET}")
        
        # ì†ŒìŠ¤ì½”ë“œ
        if (build_dir / "godot-source").exists():
            print(f"  âœ… ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œë¨")
        
        # ë¡œê·¸
        logs_dir = build_dir / "logs"
        if logs_dir.exists():
            log_files = list(logs_dir.glob("*.log"))
            if log_files:
                print(f"  ğŸ“‹ ë¹Œë“œ ë¡œê·¸: {len(log_files)}ê°œ")
    
    # 4. ë‹¤ìŒ ë‹¨ê³„
    print(f"\n{YELLOW}ë‹¤ìŒ ë‹¨ê³„:{RESET}")
    
    if config_file.exists() and Path(config.get("godot_path", "")).exists():
        print(f"  {GREEN}autoci{RESET} ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”")
    else:
        print(f"  {CYAN}build-godot{RESET} ëª…ë ¹ì–´ë¡œ ë¹Œë“œë¥¼ ì‹œì‘í•˜ì„¸ìš”")
    
    print()

if __name__ == "__main__":
    main()