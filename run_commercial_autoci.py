#!/usr/bin/env python3
"""
AutoCI ìƒìš©í™” ìˆ˜ì¤€ ì‹œìŠ¤í…œ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ í†µí•©í•˜ì—¬ ìƒìš©í™” í’ˆì§ˆì˜ AI ì„œë¹„ìŠ¤ ì œê³µ
"""

import os
import sys
import asyncio
import logging
from pathlib import Path

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ ì¶”ê°€
sys.path.append(str(Path(__file__).parent))

from commercial_autoci_master import CommercialAutoCI

# ë¡œê¹… ì„¤ì •
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - [%(levelname)s] %(message)s',
    handlers=[
        logging.FileHandler('autoci_run.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)


def print_welcome_banner():
    """í™˜ì˜ ë°°ë„ˆ ì¶œë ¥"""
    banner = """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘  ğŸ¤– AutoCI - ìƒìš©í™” ìˆ˜ì¤€ AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸                                      â•‘
â•‘                                                                              â•‘
â•‘  ğŸ’¼ ìƒìš©í™” í’ˆì§ˆì˜ ì „ë¬¸ì ì¸ AI ëŒ€í™”                                              â•‘
â•‘  ğŸ“ C# ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì½”ë”© ì§€ì›                                                 â•‘
â•‘  ğŸ”„ 24ì‹œê°„ ì§€ì†ì ì¸ ìë™ í•™ìŠµ                                                  â•‘
â•‘  âœ… ì‹¤ì‹œê°„ í’ˆì§ˆ ê²€ì¦ ë° ìµœì í™”                                                 â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ:
   â€¢ Commercial AI Dialogue Engine      (ìƒìš©í™” ìˆ˜ì¤€ ëŒ€í™” ì—”ì§„)
   â€¢ C# Expert Learning System          (C# ì „ë¬¸ê°€ í•™ìŠµ ì‹œìŠ¤í…œ)  
   â€¢ Continuous Learning Pipeline       (24ì‹œê°„ ìë™ í•™ìŠµ íŒŒì´í”„ë¼ì¸)
   â€¢ Commercial Quality Validator       (ìƒìš©í™” í’ˆì§ˆ ê²€ì¦ ì‹œìŠ¤í…œ)
   â€¢ Real Learning System               (ì‹¤ì œ í•™ìŠµ ì‹œìŠ¤í…œ)
   â€¢ AI Learning Monitor                (AI í•™ìŠµ ëª¨ë‹ˆí„°ë§)

ğŸ“Š í’ˆì§ˆ ê¸°ì¤€:
   â€¢ ëŒ€í™” ìì—°ìŠ¤ëŸ¬ì›€: 90% ì´ìƒ
   â€¢ ê¸°ìˆ  ì •í™•ë„: 95% ì´ìƒ  
   â€¢ ì‘ë‹µ ì‹œê°„: 0.5ì´ˆ ì´ë‚´
   â€¢ ì‚¬ìš©ì ë§Œì¡±ë„: 90% ì´ìƒ

ğŸ¯ ì „ë¬¸ ë¶„ì•¼:
   â€¢ C# ì–¸ì–´ ë° ê³ ê¸‰ ê¸°ëŠ¥
   â€¢ Unity ê²Œì„ ê°œë°œ
   â€¢ ë””ìì¸ íŒ¨í„´ ë° ì•„í‚¤í…ì²˜
   â€¢ ì„±ëŠ¥ ìµœì í™”
   â€¢ ì—ëŸ¬ í•´ê²° ë° ë””ë²„ê¹…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ ì‚¬ìš©ë²•:
   1. ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ë¡œ ì§ˆë¬¸í•˜ì„¸ìš”
   2. C#ì´ë‚˜ Unity ê´€ë ¨ ê¸°ìˆ ì  ë„ì›€ì´ í•„ìš”í•˜ë©´ êµ¬ì²´ì ìœ¼ë¡œ ë¬¼ì–´ë³´ì„¸ìš”
   3. ì½”ë“œ ë¦¬ë·°, ìµœì í™”, ì—ëŸ¬ í•´ê²° ë“± ëª¨ë“  ê²ƒì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤
   4. ëŒ€í™”í•  ë•Œë§ˆë‹¤ AIê°€ ë” ë˜‘ë˜‘í•´ì§‘ë‹ˆë‹¤

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"""
    print(banner)


def print_system_info():
    """ì‹œìŠ¤í…œ ì •ë³´ ì¶œë ¥"""
    info = """
ğŸ“‹ ì‹œìŠ¤í…œ ì •ë³´:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ ì£¼ìš” ëª…ë ¹ì–´:
   â€¢ 'ìƒíƒœ'         - ì‹œìŠ¤í…œ í˜„ì¬ ìƒíƒœ í™•ì¸
   â€¢ 'í’ˆì§ˆë³´ê³ ì„œ'     - ìƒì„¸í•œ í’ˆì§ˆ ê²€ì¦ ë³´ê³ ì„œ
   â€¢ 'í†µê³„'         - í•™ìŠµ ë° ì„±ëŠ¥ í†µê³„
   â€¢ 'exit' / 'ì¢…ë£Œ' - ì‹œìŠ¤í…œ ì¢…ë£Œ

ğŸ’¡ íŠ¹ë³„ ê¸°ëŠ¥:
   â€¢ ì „ë¬¸ê°€ ì§€ì‹ ìë™ ì ìš© (C#/Unity í‚¤ì›Œë“œ ê°ì§€ì‹œ)
   â€¢ ì‹¤ì‹œê°„ í•™ìŠµ ë° íŒ¨í„´ ì¸ì‹
   â€¢ ë‹¤ì¤‘ í’ˆì§ˆ ê²€ì¦ (ìì—°ìŠ¤ëŸ¬ì›€, ì •í™•ì„±, ìœ ìš©ì„±)
   â€¢ ë°±ê·¸ë¼ìš´ë“œ ì§€ì† í•™ìŠµ

ğŸ¯ ìµœì í™”ëœ ì‘ë‹µ:
   â€¢ ì½”ë“œ ì˜ˆì œ í¬í•¨
   â€¢ ë‹¨ê³„ë³„ ì„¤ëª…
   â€¢ ëª¨ë²” ì‚¬ë¡€ ì œì‹œ
   â€¢ ì—ëŸ¬ ì˜ˆë°© íŒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"""
    print(info)


async def main():
    """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜"""
    try:
        # í™˜ì˜ ë°°ë„ˆ ì¶œë ¥
        print_welcome_banner()
        
        # ì‹œìŠ¤í…œ ì •ë³´ ì¶œë ¥
        print_system_info()
        
        # AutoCI ì‹œìŠ¤í…œ ì´ˆê¸°í™” ë° ì‹¤í–‰
        logger.info("AutoCI ìƒìš©í™” ì‹œìŠ¤í…œ ì‹œì‘...")
        
        autoci = CommercialAutoCI()
        await autoci.interactive_mode()
        
    except KeyboardInterrupt:
        print("\n\nğŸ›‘ ì‚¬ìš©ì ìš”ì²­ìœ¼ë¡œ ì‹œìŠ¤í…œì„ ì¢…ë£Œí•©ë‹ˆë‹¤...")
        logger.info("ì‚¬ìš©ì ì¸í„°ëŸ½íŠ¸ë¡œ ì¢…ë£Œ")
        
    except Exception as e:
        print(f"\nâŒ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e}")
        logger.error(f"ì‹œìŠ¤í…œ ì˜¤ë¥˜: {e}", exc_info=True)
        
    finally:
        print("\nğŸ‘‹ AutoCIë¥¼ ì‚¬ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!")
        logger.info("AutoCI ì‹œìŠ¤í…œ ì¢…ë£Œ ì™„ë£Œ")


if __name__ == "__main__":
    # ê°€ìƒí™˜ê²½ ì²´í¬
    if not hasattr(sys, 'real_prefix') and not (hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix):
        print("âš ï¸  ê°€ìƒí™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.")
        print("   python -m venv venv")
        print("   source venv/bin/activate  # Linux/Mac")
        print("   venv\\Scripts\\activate     # Windows")
        print()
    
    # í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì²´í¬
    required_packages = ['numpy', 'sqlite3', 'asyncio', 'pathlib', 'datetime', 'logging']
    missing_packages = []
    
    for package in required_packages:
        try:
            __import__(package)
        except ImportError:
            if package not in ['sqlite3', 'asyncio', 'pathlib', 'datetime', 'logging']:  # ë‚´ì¥ ëª¨ë“ˆ ì œì™¸
                missing_packages.append(package)
    
    if missing_packages:
        print(f"âŒ í•„ìˆ˜ íŒ¨í‚¤ì§€ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤: {', '.join(missing_packages)}")
        print("ì„¤ì¹˜ ëª…ë ¹ì–´: pip install " + " ".join(missing_packages))
        sys.exit(1)
    
    # ì´ë²¤íŠ¸ ë£¨í”„ ì‹¤í–‰
    asyncio.run(main())