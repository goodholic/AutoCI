# AutoCI Learn 명령어 개선 사항

## 문제점
- `autoci learn` 명령어가 24시간 실행 중 오류로 인해 중단되는 문제
- 메모리 부족 및 모델 로딩 실패 시 전체 학습이 중단됨
- 네트워크 타임아웃이나 일시적 오류에 대한 복구 메커니즘 부재

## 구현된 개선 사항

### 1. 명령어 인자 수정
- `autoci learn` - 기본 32GB 메모리로 24시간 학습
- `autoci learn low` - 8GB 메모리로 24시간 학습 (RTX 2080 최적화)

### 2. 자동 재시작 메커니즘
- 오류 발생 시 최대 5회까지 자동 재시작
- 재시작 간격은 점진적으로 증가 (최대 5분)
- 남은 시간을 계산하여 목표 시간까지 학습 지속

### 3. 강화된 오류 처리
- **모델 로딩**: 3회 재시도 후 실패 시 대체 모델 사용
- **답변 생성**: 60초 타임아웃 및 2회 재시도
- **메모리 관리**: 위험 수준(95%) 도달 시 모든 모델 언로드
- **개별 작업 오류**: 각 작업별 try-catch로 전체 중단 방지

### 4. 메모리 관리 개선
- 85% 사용 시 현재 모델 언로드 및 가비지 컬렉션
- 95% 사용 시 모든 모델 언로드 및 30초 대기
- 2시간마다 주기적 메모리 정리 (모델 재로드, 버퍼 크기 조정)

### 5. 모니터링 강화
- 1시간마다 시스템 헬스체크 로그 출력
  - 경과/남은 시간, 진행 상황, 성공률
  - 메모리 사용량, 현재 모델, 커버된 주제
- 오류 발생 시 상세 스택 트레이스 기록

### 6. 진행 상황 보존
- 오류 발생 시에도 현재까지의 학습 진행 상황 저장
- 재시작 시 이전 학습 데이터 유지

## 효과
- 24시간 연속 학습 안정성 대폭 향상
- 일시적 오류로 인한 전체 학습 중단 방지
- 메모리 부족 상황 사전 예방 및 자동 복구
- 상세한 모니터링으로 문제 원인 파악 용이

## 사용 방법
```bash
# 일반 학습 (32GB)
./autoci learn

# 저사양 학습 (8GB)
./autoci learn low
```

## 로그 확인
학습 중 문제 발생 시 다음 로그를 확인하세요:
- 시스템 헬스체크 (1시간마다)
- 메모리 정리 로그 (2시간마다)
- 오류 발생 및 재시작 로그
- 최종 학습 요약 통계